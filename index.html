<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Universal RGB Image Renderer</title>

<style>
body {
    background: #0a0a0a;
    color: #00ff88;
    font-family: monospace;
    text-align: center;
    padding: 20px;
}

h1 { color: white; }

.instructions {
    max-width: 900px;
    margin: auto;
    text-align: left;
    color: #cccccc;
}

textarea {
    width: 95%;
    height: 220px;
    background: #111;
    color: #00ff88;
    border: 1px solid #00ff88;
    padding: 10px;
    margin-top: 15px;
    resize: vertical;
}

input, select {
    background: #111;
    color: #00ff88;
    border: 1px solid #00ff88;
    padding: 6px;
    text-align: center;
    margin: 5px;
}

button {
    background: #00aa44;
    color: white;
    border: none;
    padding: 15px 40px;
    font-size: 18px;
    margin-top: 20px;
    cursor: pointer;
}

button:hover { background: #00cc55; }

canvas {
    margin-top: 40px;
    border: 1px solid #00ff88;
    image-rendering: pixelated;
    background: black;
}

#error {
    color: red;
    margin-top: 10px;
}
</style>
</head>

<body>

<h1>Universal RGB Image Renderer</h1>

<div class="instructions">
<b>Instructions:</b><br>
1. Enter size as Width-Height (1-1000 pixels)<br>
2. Each pixel requires 3 values (R G B)<br>
3. Values depend on selected format<br>
4. Total values = Width × Height × 3<br>
5. Morse: "-" = 1 and "." = 0 (must equal 8 symbols)<br>
</div>

<br>

Size (W-H):
<input id="size" value="2-2">

Format:
<select id="format">
  <option value="binary">Binary (8-bit)</option>
  <option value="decimal">Decimal (0-255)</option>
  <option value="hex">Hex (00-FF)</option>
  <option value="octal">Octal (000-377)</option>
  <option value="morse">Morse (- = 1, . = 0)</option>
</select>

<br>

<textarea id="inputData" placeholder="Enter values separated by spaces..."></textarea>

<br>

<button onclick="renderImage()">Convert</button>

<div id="error"></div>

<canvas id="canvas"></canvas>

<script>

function parseValue(value, format) {

    if (format === "binary") {
        if (!/^[01]{8}$/.test(value)) return null;
        return parseInt(value, 2);
    }

    if (format === "decimal") {
        let num = parseInt(value, 10);
        return (num >= 0 && num <= 255) ? num : null;
    }

    if (format === "hex") {
        if (!/^[0-9a-fA-F]{1,2}$/.test(value)) return null;
        return parseInt(value, 16);
    }

    if (format === "octal") {
        if (!/^[0-7]{1,3}$/.test(value)) return null;
        let num = parseInt(value, 8);
        return (num <= 255) ? num : null;
    }

    if (format === "morse") {
        if (!/^[\.\-]{8}$/.test(value)) return null;
        let binary = value.replace(/-/g, "1").replace(/\./g, "0");
        return parseInt(binary, 2);
    }

    return null;
}

function renderImage() {

    const errorDiv = document.getElementById("error");
    errorDiv.textContent = "";

    const sizeInput = document.getElementById("size").value.split("-");
    const width = parseInt(sizeInput[0]);
    const height = parseInt(sizeInput[1]);
    const format = document.getElementById("format").value;

    if (!width || !height || width < 1 || height < 1 || width > 1000 || height > 1000) {
        errorDiv.textContent = "Size must be between 1-1000 pixels.";
        return;
    }

    const totalPixels = width * height;

    if (totalPixels > 500000) {
        if (!confirm("Large image detected. Continue?")) return;
    }

    const values = document.getElementById("inputData")
        .value.trim()
        .split(/\s+/);

    const expectedValues = totalPixels * 3;

    if (values.length !== expectedValues) {
        errorDiv.textContent = "Incorrect number of values. Expected: " + expectedValues;
        return;
    }

    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    canvas.width = width;
    canvas.height = height;

    const imgData = ctx.createImageData(width, height);

    for (let i = 0; i < totalPixels; i++) {

        const r = parseValue(values[i * 3], format);
        const g = parseValue(values[i * 3 + 1], format);
        const b = parseValue(values[i * 3 + 2], format);

        if (r === null || g === null || b === null) {
            errorDiv.textContent = "Invalid value detected for selected format.";
            return;
        }

        imgData.data[i * 4] = r;
        imgData.data[i * 4 + 1] = g;
        imgData.data[i * 4 + 2] = b;
        imgData.data[i * 4 + 3] = 255;
    }

    ctx.putImageData(imgData, 0, 0);

    const scale = 300 / width;
    canvas.style.width = (width * scale) + "px";
    canvas.style.height = (height * scale) + "px";
}

</script>

</body>
</html>